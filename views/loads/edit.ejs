<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Edit Load - <%= load.loadNumber %></title>
  <link rel="stylesheet" href="/stylesheet/load-form.css" />
</head>
<body>
  <%- include('../partials/_navbar.ejs') %>

  <div class="form-container">
    <h1 class="form-title">Edit Load: <%= load.loadNumber %></h1>
    <form
      class="load-form"
      action="/users/<%= user._id %>/loads/<%= load._id %>?_method=PUT"
      method="POST"
    >
      <input type="hidden" name="loadNumber" value="<%= load.loadNumber %>" />

      <div class="form-row">
        <div class="form-group">
          <label>📦 Broker Name</label>
          <input type="text" name="brokerName" value="<%= load.brokerName %>" required />
        </div>
        <div class="form-group">
          <label>📁 Confirmation Number</label>
          <input type="text" name="confirmationNumber" value="<%= load.confirmationNumber %>" required />
        </div>
      </div>

      <div class="form-row triple">
        <div class="form-group">
          <label>🏠 Pickup Date</label>
          <input type="date" name="pickupDate" value="<%= load.pickupDate.toISOString().split('T')[0] %>" required />
        </div>
        <div class="form-group">
          <label>Pickup Location</label>
          <input type="text" name="pickupLocation" value="<%= load.pickupLocation %>" required />
        </div>
        <div class="form-group">
          <label>Delivery Date</label>
          <input type="date" name="deliveryDate" value="<%= load.deliveryDate.toISOString().split('T')[0] %>" required />
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Delivery Location</label>
          <input type="text" name="deliveryLocation" value="<%= load.deliveryLocation %>" required />
        </div>
        <div class="form-group">
          <label>💵 Rate</label>
          <input type="number" name="rate" value="<%= load.rate %>" step="0.01" required />
        </div>
      </div>

      <div class="form-row triple">
        <div class="form-group">
          <label>💰 Payment Status</label>
          <div class="radio-group">
            <label><input type="radio" name="paymentStatus" value="notPaid" <%= load.paymentStatus === 'notPaid' ? 'checked' : '' %> /> Not Paid</label>
            <label><input type="radio" name="paymentStatus" value="paid" <%= load.paymentStatus === 'paid' ? 'checked' : '' %> /> Paid</label>
          </div>
        </div>

        <div class="form-group">
          <label>📄 Broker Invoiced</label>
          <div class="radio-group">
            <label><input type="radio" name="invoiced" value="yes" <%= load.invoiced === 'yes' ? 'checked' : '' %> /> Yes</label>
            <label><input type="radio" name="invoiced" value="no" <%= load.invoiced === 'no' ? 'checked' : '' %> /> No</label>
          </div>
        </div>
      </div>

      <div class="form-row triple">
        <div class="form-group">
          <label>📍 Contacted Date</label>
          <input type="date" name="contactedDate" value="<%= load.contactedDate ? load.contactedDate.toISOString().split('T')[0] : '' %>" />
        </div>
        <div class="form-group">
          <label>Invoiced Date</label>
          <input type="date" name="invoicedDate" value="<%= load.invoicedDate ? load.invoicedDate.toISOString().split('T')[0] : '' %>" />
        </div>
        <div class="form-group">
          <label>Payment Due</label>
          <input type="date" name="pmtTerms" value="<%= load.pmtTerms ? load.pmtTerms.toISOString().split('T')[0] : '' %>" />
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>📝 Notes</label>
          <textarea name="notes"><%= load.notes %></textarea>
        </div>
      </div>

      <div class="button-group">
        <button type="submit" class="btn-submit">💾 Update Load</button>
        <a href="/users/<%= user._id %>/loads" class="btn-back">
          <img src="https://i.postimg.cc/527W8pfP/arrow-back-3783-1.png" alt="Back Arrow" />
          Go Back
        </a>
      </div>
    </form>
  </div>
</body>
</html>
